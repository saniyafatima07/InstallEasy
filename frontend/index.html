<!DOCTYPE html>
<html>
<head>
    <title>C++ Development Environment Installer</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel = "stylesheet" href = "index.css">
    <script src = "main.js"></script>
</head>
<body>
    <div class="container">
        <h1>C++ Development Environment Installer</h1>
        <p class="description">Professional setup tool for C++ development environment</p>

        <div class="features">
            <h2>Installation Package Includes:</h2>
            <ul>
                <li>C++ Compiler (MinGW/GCC/Clang)</li>
                <li>Visual Studio Code Editor</li>
                <li>Essential VS Code Extensions</li>
                <li>Optimized Configuration Settings</li>
                <li>Development Tools & Utilities</li>
            </ul>
        </div>

        <div class="button-container">
            <button id="startButton" onclick="startInstallation()">
                Start Installation
            </button>
        </div>

        <div class="progress-container">
            <div class="progress" id="progress"></div>
        </div>
    </div>

    <script>
        const { ipcRenderer } = require('electron');
        
        function startInstallation() {
            const startButton = document.getElementById('startButton');
            startButton.disabled = true;
            addProgress('Requesting administrator privileges...', 'üîê');
            ipcRenderer.send('start-installation');
        }
        
        function addProgress(message, icon = 'üìù') {
            const progress = document.getElementById('progress');
            const messageElement = document.createElement('div');
            messageElement.className = 'progress-message';
            messageElement.innerHTML = `<span class="status-icon">${icon}</span>${message}`;
            progress.appendChild(messageElement);
            progress.scrollTop = progress.scrollHeight;
        }
        
        ipcRenderer.on('installation-progress', (event, message) => {
            const icons = {
                'Starting installation...': 'üöÄ',
                'Installing compiler...': '‚öô',
                'Installing VS Code...': 'üìù',
                'Installing extensions...': 'üîå',
                'Configuring VS Code...': '‚ö°',
                'Verifying installation...': 'üîç',
                'Installation completed successfully!': '‚ú®'
            };
            addProgress(message, icons[message] || 'üìù');
        });
        
        ipcRenderer.on('installation-error', (event, message) => {
            const messageElement = document.createElement('div');
            messageElement.className = 'progress-message error';
            messageElement.innerHTML = `<span class="status-icon">‚ùå</span>Error: ${message}`;
            progress.appendChild(messageElement);
            document.getElementById('startButton').disabled = false;
        });
        
        ipcRenderer.on('elevation-failed', () => {
            addProgress('Failed to get administrator privileges. Please run the installer as administrator.', '‚ö†');
            document.getElementById('startButton').disabled = false;
        });
    </script>
</body>
</html>